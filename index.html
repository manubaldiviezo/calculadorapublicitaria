<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MANU | Estimador de Inversi칩n & Rentabilidad</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Identidad MANU */
            --brand-color: #FF4500; /* Naranja Intenso */
            --brand-dark: #cc3700;
            
            /* Colores de Estado */
            --safe: #10B981; /* Verde Rentable */
            --danger: #EF4444; /* Rojo P칠rdida */
            --neutral: #6B7280;
            
            /* UI Oscura Profesional */
            --bg-body: #050505;
            --bg-card: #111111;
            --bg-input: #1a1a1a;
            --border: #262626;
            --text-main: #FFFFFF;
            --text-sec: #9CA3AF;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* --- HEADER --- */
        header {
            padding: 1.5rem 5%;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(10px);
            position: sticky; top: 0; z-index: 100;
        }

        .brand-logo { font-weight: 800; font-size: 1.4rem; letter-spacing: -0.5px; }
        .brand-logo span { color: var(--brand-color); }
        .brand-tagline { font-size: 0.8rem; color: var(--text-sec); font-weight: 500; margin-left: 10px; border-left: 1px solid #333; padding-left: 10px; }

        /* --- LAYOUT GRID --- */
        .container {
            display: grid;
            grid-template-columns: 380px 1fr; /* Panel Inputs Fijo | Resultados Flexible */
            flex: 1;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }

        /* --- LEFT PANEL: DATOS DE NEGOCIO --- */
        .input-panel {
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            padding: 2.5rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            overflow-y: auto;
            height: calc(100vh - 73px);
        }

        .input-group { display: flex; flex-direction: column; gap: 0.8rem; position: relative; }

        label {
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--text-sec);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        select, input {
            background: var(--bg-input);
            border: 1px solid var(--border);
            color: #fff;
            padding: 14px;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Inter', sans-serif;
            transition: 0.2s;
            width: 100%;
        }

        select:focus, input:focus { border-color: var(--brand-color); }

        .helper-text { font-size: 0.75rem; color: #555; line-height: 1.4; margin-top: -5px; }

        /* --- RIGHT PANEL: AN츼LISIS --- */
        .result-panel {
            padding: 3rem;
            display: flex;
            flex-direction: column;
            gap: 3rem;
            overflow-y: auto;
            height: calc(100vh - 73px);
        }

        /* Hero Cards */
        .kpi-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }

        .kpi-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            position: relative;
            transition: transform 0.2s;
        }
        .kpi-card:hover { transform: translateY(-3px); border-color: #333; }
        
        .kpi-card.main { border-bottom: 3px solid var(--brand-color); background: linear-gradient(180deg, rgba(255, 69, 0, 0.05) 0%, rgba(17,17,17,1) 100%); }

        .kpi-label { font-size: 0.8rem; color: var(--text-sec); font-weight: 600; text-transform: uppercase; margin-bottom: 12px; }
        .kpi-value { font-size: 2.5rem; font-weight: 700; color: #fff; letter-spacing: -1px; }
        .kpi-sub { font-size: 0.85rem; margin-top: 8px; color: var(--text-sec); }

        /* Visualizador de Viabilidad */
        .viability-section {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
        }

        .section-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center; }
        .status-badge { padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; text-transform: uppercase; }

        /* Barras de Progreso ROAS */
        .roas-meter-container { margin-top: 1rem; position: relative; padding-top: 20px; }
        
        .roas-track {
            height: 12px;
            background: #222;
            border-radius: 6px;
            width: 100%;
            position: relative;
        }

        .marker {
            position: absolute;
            top: -25px;
            transform: translateX(-50%);
            font-size: 0.75rem;
            font-weight: 700;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: left 0.5s ease;
        }
        .marker::after { content: ''; width: 2px; height: 35px; background: currentColor; margin-top: 2px; }

        .marker-be { color: var(--danger); z-index: 2; } /* Break Even */
        .marker-target { color: var(--brand-color); z-index: 3; } /* Objetivo */
        .marker-market { color: var(--neutral); z-index: 1; opacity: 0.5; } /* Promedio Mercado */

        /* An치lisis de Experto */
        .expert-box {
            margin-top: 2rem;
            padding: 1.5rem;
            border-left: 4px solid var(--brand-color);
            background: rgba(255, 69, 0, 0.03);
            border-radius: 0 8px 8px 0;
        }
        .expert-title { color: var(--brand-color); font-weight: 700; margin-bottom: 0.5rem; font-size: 0.9rem; text-transform: uppercase; }
        .expert-text { font-size: 0.95rem; line-height: 1.6; color: #ddd; }

        /* Responsive */
        @media (max-width: 1100px) {
            .container { grid-template-columns: 1fr; }
            .input-panel, .result-panel { height: auto; border-right: none; }
            .kpi-container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<header>
    <div class="brand-logo">MANU <span>/ CALCULATOR</span> <span class="brand-tagline">Estimador de Inversi칩n y Ganancia</span></div>
</header>

<div class="container">
    
    <div class="input-panel">
        
        <div class="input-group">
            <label>1. Rubro / Nicho de Mercado</label>
            <select id="niche" onchange="calculate()">
                <optgroup label="E-commerce (Venta Productos)">
                    <option value="fashion">Moda, Ropa y Accesorios</option>
                    <option value="jewelry">Joyer칤a y Lujo</option>
                    <option value="beauty">Belleza, Cosm칠tica y Skincare</option>
                    <option value="tech">Tecnolog칤a y Gadgets</option>
                    <option value="home">Hogar y Decoraci칩n</option>
                    <option value="pets">Mascotas</option>
                    <option value="kids">Beb칠s y Juguetes</option>
                </optgroup>
                <optgroup label="Servicios & Profesionales">
                    <option value="health_service">Salud (Dentistas, Cl칤nicas)</option>
                    <option value="lawyer">Abogados y Contadores</option>
                    <option value="real_estate">Bienes Ra칤ces / Inmobiliaria</option>
                    <option value="gym">Gimnasios y Fitness</option>
                    <option value="construction">Remodelaci칩n y Construcci칩n</option>
                </optgroup>
                <optgroup label="Educaci칩n & Digital">
                    <option value="course_low">Cursos Online (Low Ticket)</option>
                    <option value="course_high">Mentoria / High Ticket</option>
                    <option value="software">SaaS / Software</option>
                </optgroup>
            </select>
            <div class="helper-text">Usamos datos hist칩ricos de este rubro para calcular los costos publicitarios promedio.</div>
        </div>

        <div class="input-group">
            <label>2. Meta de Facturaci칩n Mensual ($)</label>
            <input type="number" id="revenue" value="5000" placeholder="Ej. 5000" oninput="calculate()">
        </div>

        <div class="input-group">
            <label>3. Precio Promedio al P칰blico (Ticket) ($)</label>
            <input type="number" id="price" value="50" placeholder="Ej. 50" oninput="calculate()">
        </div>

        <div class="input-group">
            <label>4. Costo del Producto/Servicio ($)</label>
            <input type="number" id="cost" value="20" placeholder="Ej. 20" oninput="calculate()">
            <div class="helper-text">Lo que te cuesta producirlo, comprarlo o entregarlo (sin contar publicidad).</div>
        </div>

    </div>

    <div class="result-panel">
        
        <div class="kpi-container">
            <div class="kpi-card main">
                <div class="kpi-label">Inversi칩n Sugerida</div>
                <div class="kpi-value" id="res-invest">$0</div>
                <div class="kpi-sub">Presupuesto en Ads</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Utilidad Estimada</div>
                <div class="kpi-value" id="res-profit" style="color: var(--safe);">$0</div>
                <div class="kpi-sub" id="res-margin">0% Margen Final</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-label">Punto de Equilibrio (Break-Even)</div>
                <div class="kpi-value" id="res-be" style="color: var(--danger);">0.0x</div>
                <div class="kpi-sub">ROAS M칤nimo para no perder</div>
            </div>
        </div>

        <div class="viability-section">
            <div class="section-title">
                <span>An치lisis de Viabilidad de Mercado</span>
                <span id="badge-status" class="status-badge" style="background:#333; color:#aaa">CALCULANDO...</span>
            </div>
            
            <p style="color: #aaa; font-size: 0.9rem; margin-bottom: 3rem;">
                Comparativa: Tu Punto de Equilibrio vs. Lo que el Mercado suele dar en el nicho <strong><span id="niche-name">...</span></strong>.
            </p>

            <div class="roas-meter-container">
                <div class="roas-track"></div>
                
                <div id="mark-be" class="marker marker-be" style="left: 0%;">
                    <span>TU EQUILIBRIO</span>
                    <strong id="val-be">0.0x</strong>
                </div>

                <div id="mark-avg" class="marker marker-market" style="left: 0%;">
                    <span>PROMEDIO RUBRO</span>
                    <strong id="val-avg">0.0x</strong>
                </div>

                <div id="mark-target" class="marker marker-target" style="left: 0%;">
                    <span>OBJETIVO</span>
                    <strong id="val-target">0.0x</strong>
                </div>
            </div>

            <div class="expert-box">
                <div class="expert-title">游눠 Diagn칩stico de MANU</div>
                <div class="expert-text" id="expert-msg">
                    Ingresa tus datos para recibir el diagn칩stico.
                </div>
            </div>
        </div>

    </div>
</div>

<script>
    // --- CEREBRO DE LA APLICACI칍N (DATABASE DE NICHOS) ---
    // ROAS Avg: Lo que una campa침a normalita suele dar.
    // ROAS High: Lo que una campa침a bien optimizada da.
    const nicheData = {
        // E-COMMERCE
        fashion: { label: "Moda", roasAvg: 4.0, roasHigh: 7.0 },
        jewelry: { label: "Joyer칤a", roasAvg: 5.0, roasHigh: 9.0 },
        beauty:  { label: "Belleza", roasAvg: 3.5, roasHigh: 6.0 },
        tech:    { label: "Tecnolog칤a", roasAvg: 3.0, roasHigh: 5.0 },
        home:    { label: "Hogar", roasAvg: 3.8, roasHigh: 6.5 },
        pets:    { label: "Mascotas", roasAvg: 4.5, roasHigh: 7.5 },
        kids:    { label: "Ni침os/Juguetes", roasAvg: 4.0, roasHigh: 6.5 },
        
        // SERVICIOS
        health_service: { label: "Salud/Dental", roasAvg: 5.0, roasHigh: 10.0 }, // Alto retorno por LTV
        lawyer:         { label: "Legal", roasAvg: 6.0, roasHigh: 12.0 },
        real_estate:    { label: "Inmobiliaria", roasAvg: 15.0, roasHigh: 40.0 }, // ROI sobre comisi칩n, no venta total
        gym:            { label: "Fitness", roasAvg: 4.0, roasHigh: 8.0 },
        construction:   { label: "Construcci칩n", roasAvg: 8.0, roasHigh: 15.0 },
        
        // DIGITAL
        course_low:  { label: "Cursos Low Ticket", roasAvg: 2.5, roasHigh: 4.5 },
        course_high: { label: "Mentoria High Ticket", roasAvg: 4.0, roasHigh: 8.0 },
        software:    { label: "Software/SaaS", roasAvg: 3.0, roasHigh: 6.0 }
    };

    function calculate() {
        // 1. OBTENER DATOS SIMPLES
        const nicheKey = document.getElementById('niche').value;
        const revenue = parseFloat(document.getElementById('revenue').value) || 0;
        const price = parseFloat(document.getElementById('price').value) || 0;
        const cost = parseFloat(document.getElementById('cost').value) || 0;

        if (revenue === 0 || price === 0) return;

        const data = nicheData[nicheKey];
        document.getElementById('niche-name').innerText = data.label;

        // 2. C츼LCULOS INTERNOS (LO QUE EL USUARIO NO SABE HACER)
        
        // Margen Bruto ($) y (%)
        const marginDollar = price - cost;
        const marginPerc = marginDollar / price;
        
        // Break Even ROAS = Precio Venta / Margen Bruto
        // Ejemplo: Vendo a 100, gano 50. Necesito 100/50 = 2x ROAS para no perder.
        let breakEvenROAS = price / marginDollar;
        if(marginDollar <= 0) breakEvenROAS = 100; // Evitar error infinito

        // ROAS Objetivo (Usamos el promedio del mercado como base, pero ajustamos si es necesario)
        let targetROAS = data.roasAvg;
        
        // Safety Check: Si el promedio de mercado es menor al Break Even, usamos el High Performance
        // Si aun as칤 no da, alertamos.
        if (targetROAS <= breakEvenROAS) {
            targetROAS = data.roasHigh; 
        }

        // Inversi칩n Necesaria = Meta / ROAS Objetivo
        const investment = revenue / targetROAS;
        
        // Utilidad = Revenue - (Costo Productos Total) - Inversi칩n
        const totalUnits = revenue / price;
        const totalCostProd = totalUnits * cost;
        const profit = revenue - totalCostProd - investment;
        const profitMargin = (profit / revenue) * 100;

        // 3. RENDERIZADO DE RESULTADOS
        document.getElementById('res-invest').innerText = fmtMoney(investment);
        document.getElementById('res-profit').innerText = fmtMoney(profit);
        document.getElementById('res-margin').innerText = profitMargin.toFixed(1) + "% Margen Final";
        document.getElementById('res-be').innerText = breakEvenROAS.toFixed(2) + "x";

        // 4. L칍GICA DE VISUALIZACI칍N GR츼FICA (SLIDER)
        // Definimos una escala visual de 0 a MaxROAS (aprox 1.5 veces el high)
        const scaleMax = Math.max(breakEvenROAS, data.roasHigh) * 1.5;
        
        // Posiciones en %
        const posBE = Math.min((breakEvenROAS / scaleMax) * 100, 95);
        const posAvg = Math.min((data.roasAvg / scaleMax) * 100, 95);
        const posTarget = Math.min((targetROAS / scaleMax) * 100, 95);

        // Mover Marcadores
        updateMarker('mark-be', posBE, breakEvenROAS);
        updateMarker('mark-avg', posAvg, data.roasAvg);
        updateMarker('mark-target', posTarget, targetROAS);

        // 5. DIAGN칍STICO DEL EXPERTO (MANU)
        const badge = document.getElementById('badge-status');
        const msgBox = document.getElementById('expert-msg');
        const profitEl = document.getElementById('res-profit');

        // Escenario 1: Margen Negativo o Nulo (Producto mal costeado)
        if (marginDollar <= 0) {
            badge.innerText = "NO VIABLE";
            badge.style.background = "var(--danger)"; badge.style.color = "#fff";
            profitEl.style.color = "var(--danger)";
            msgBox.innerHTML = `丘멆잺 <strong>Error Cr칤tico de Negocio:</strong> Tu costo de producto es igual o mayor al precio de venta. Ninguna campa침a publicitaria puede arreglar esto. Necesitas subir precios o bajar costos de producci칩n antes de invertir un centavo.`;
        } 
        // Escenario 2: El Mercado no soporta tu Break Even (Tu margen es muy bajo para el est치ndar del nicho)
        else if (breakEvenROAS > data.roasAvg) {
            badge.innerText = "RIESGO ALTO";
            badge.style.background = "var(--danger)"; badge.style.color = "#fff";
            profitEl.style.color = "var(--danger)";
            msgBox.innerHTML = `游띔 <strong>Alerta de Margen:</strong> Tu "Punto de Equilibrio" es ${breakEvenROAS.toFixed(2)}x, pero el promedio en ${data.label} es solo ${data.roasAvg.toFixed(2)}x. <br><br>Esto significa que necesitar치s campa침as extraordinarias (top 10%) solo para empatar. Te sugiero aumentar tu Ticket Promedio (AOV) o mejorar tu margen antes de invertir fuerte.`;
        }
        // Escenario 3: Margen Apretado pero Posible
        else if (profitMargin < 15) {
            badge.innerText = "MARGEN AJUSTADO";
            badge.style.background = "#FFC107"; badge.style.color = "#000";
            profitEl.style.color = "#FFC107";
            msgBox.innerHTML = `丘멆잺 <strong>Precauci칩n:</strong> Es viable, pero te quedar치 poco margen limpio (${profitMargin.toFixed(1)}%). Est치s invirtiendo $1 para ganar unos centavos. <br><br>Sugerencia: Enf칩cate en la recompra (LTV) para que la ganancia real venga de la segunda venta, ya que la primera apenas cubre costos.`;
        }
        // Escenario 4: Escenario Ideal
        else {
            badge.innerText = "EXCELENTE OPORTUNIDAD";
            badge.style.background = "var(--safe)"; badge.style.color = "#fff";
            profitEl.style.color = "var(--safe)";
            msgBox.innerHTML = `游 <strong>Luz Verde:</strong> Tienes un margen saludable. Tu Punto de Equilibrio (${breakEvenROAS.toFixed(2)}x) es f치cil de superar con el rendimiento est치ndar del rubro (${data.roasAvg}x). <br><br>Con una inversi칩n de <strong>${fmtMoney(investment)}</strong>, proyectas una ganancia limpia de <strong>${fmtMoney(profit)}</strong>. Es momento de escalar.`;
        }
    }

    function updateMarker(id, pos, val) {
        const el = document.getElementById(id);
        el.style.left = pos + "%";
        // Encontrar el elemento strong dentro y actualizar texto
        el.querySelector('strong').innerText = val.toFixed(2) + "x";
    }

    function fmtMoney(num) {
        return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(num);
    }

    // Iniciar
    calculate();
</script>

</body>
</html>
