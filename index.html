<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MANU | Growth Projection Engine</title>
    <link href="https://fonts.googleapis.com/css2?family=Teko:wght@300;400;600&family=Manrope:wght@300;500;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* MANU BRAND DNA */
            --orange-neon: #FF4000;
            --orange-dark: #cc3300;
            --dark-bg: #050505;
            --panel-bg: #101010;
            --card-bg: #181818;
            --text-white: #ffffff;
            --text-dim: #666666;
            
            /* GRADING COLORS */
            --grade-c: #ff9f43; /* Launch */
            --grade-b: #00d2d3; /* Growth */
            --grade-a: #ee5253; /* Unicorn/Scale (Brand color because it's the goal) */
            
            --glow: 0 0 20px rgba(255, 64, 0, 0.15);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }

        body {
            font-family: 'Manrope', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-white);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* --- HEADER --- */
        nav {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #222;
        }
        
        .brand { font-family: 'Teko', sans-serif; font-size: 2rem; letter-spacing: 1px; line-height: 1; }
        .brand span { color: var(--orange-neon); }
        .brand-sub { font-size: 0.8rem; color: #555; font-family: 'Manrope', sans-serif; letter-spacing: 2px; text-transform: uppercase; }

        /* --- MAIN CONTAINER --- */
        .engine-wrapper {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 0;
            min-height: calc(100vh - 80px);
        }

        /* --- LEFT: INPUTS (SIMPLE & CLEAN) --- */
        .inputs-panel {
            background: var(--panel-bg);
            padding: 40px;
            border-right: 1px solid #222;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        h2 { font-family: 'Teko', sans-serif; font-size: 1.8rem; font-weight: 400; text-transform: uppercase; color: #888; margin-bottom: 10px; }
        .active-h2 { color: var(--text-white); }

        .input-block { position: relative; }
        
        label { display: block; font-size: 0.75rem; color: var(--orange-neon); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; }

        input, select {
            width: 100%;
            background: transparent;
            border: none;
            border-bottom: 2px solid #333;
            color: #fff;
            font-family: 'Manrope', sans-serif;
            font-size: 1.5rem;
            padding: 10px 0;
            transition: all 0.3s ease;
        }

        select { font-size: 1.1rem; cursor: pointer; }
        select option { background: #111; }

        input:focus, select:focus { border-color: var(--orange-neon); box-shadow: 0 10px 20px -10px rgba(255, 64, 0, 0.2); }

        .hint { font-size: 0.75rem; color: #444; margin-top: 8px; line-height: 1.4; }

        /* --- RIGHT: VISUALIZATION --- */
        .viz-panel {
            padding: 50px;
            background: radial-gradient(circle at top right, #1a0a0a, #050505);
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        /* Top Hero Metrics */
        .projection-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 20px;
        }
        .main-title { font-size: 3rem; font-family: 'Teko', sans-serif; line-height: 1; text-transform: uppercase; }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid #222;
            border-radius: 12px;
            padding: 25px;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s;
        }
        
        .metric-card:hover { transform: translateY(-5px); border-color: var(--orange-neon); }

        .m-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; color: #666; margin-bottom: 10px; }
        .m-val { font-size: 2.5rem; font-weight: 800; color: #fff; line-height: 1; }
        .m-sub { font-size: 0.85rem; margin-top: 10px; color: var(--orange-neon); font-weight: 600; }

        /* Exponential Growth Phases */
        .phases-container {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .phase-col {
            background: linear-gradient(180deg, rgba(20,20,20,0.8) 0%, rgba(5,5,5,1) 100%);
            border: 1px solid #222;
            border-radius: 16px;
            padding: 25px;
            position: relative;
            transition: all 0.4s ease;
            cursor: default;
        }

        .phase-col:hover { border-color: #444; background: linear-gradient(180deg, rgba(30,30,30,0.9) 0%, rgba(10,10,10,1) 100%); }
        .phase-col.recommended { border: 1px solid var(--orange-neon); box-shadow: var(--glow); transform: scale(1.02); z-index: 10; }

        .p-badge { 
            display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: 800; text-transform: uppercase; margin-bottom: 15px;
        }
        .pb-1 { background: #333; color: #aaa; }
        .pb-2 { background: var(--orange-neon); color: #000; }
        .pb-3 { background: #fff; color: #000; }

        .p-roas { font-size: 3rem; font-family: 'Teko', sans-serif; line-height: 1; margin-bottom: 5px; }
        .p-profit { font-size: 1.5rem; font-weight: 700; color: #fff; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 15px; }
        
        .p-list { list-style: none; font-size: 0.85rem; color: #888; line-height: 2; }
        .p-list li { display: flex; justify-content: space-between; }
        .p-list li span:last-child { color: #ccc; font-weight: 600; }

        /* Logic Warning */
        .alert-box {
            grid-column: span 3;
            background: rgba(255, 64, 0, 0.1);
            border-left: 4px solid var(--orange-neon);
            padding: 15px;
            font-size: 0.9rem;
            color: #ccc;
            margin-top: 10px;
            display: none; /* JS toggles this */
        }

        @media (max-width: 1000px) {
            .engine-wrapper { grid-template-columns: 1fr; }
            .inputs-panel { border-right: none; border-bottom: 1px solid #222; }
            .phases-container { grid-template-columns: 1fr; }
            .metric-card { padding: 20px; }
            .m-val { font-size: 2rem; }
        }
    </style>
</head>
<body>

<nav>
    <div class="brand">MANU <span>/ PROJECTOR</span></div>
    <div class="brand-sub">Engine v6.0</div>
</nav>

<div class="engine-wrapper">
    <div class="inputs-panel">
        <h2 class="active-h2">Datos del Negocio</h2>
        
        <div class="input-block">
            <label>1. Rubro / Nicho</label>
            <select id="niche" onchange="calculate()">
                <option value="fashion" selected>Moda & Retail (Alto Volumen)</option>
                <option value="high_ticket">Servicios High Ticket / Consultoría</option>
                <option value="infoproduct">Infoproductos / Cursos (Margen Alto)</option>
                <option value="real_estate">Inmobiliaria / Bienes Raíces</option>
                <option value="tech">Tecnología & Gadgets</option>
            </select>
            <p class="hint">Define el potencial de escalado del algoritmo.</p>
        </div>

        <div class="input-block">
            <label>2. Objetivo de Facturación ($)</label>
            <input type="number" id="revenueGoal" value="10000" placeholder="Ej. 10000" oninput="calculate()">
            <p class="hint">¿Cuánto quieres vender al mes?</p>
        </div>

        <div class="input-block">
            <label>3. Precio Promedio (Ticket) ($)</label>
            <input type="number" id="ticket" value="80" placeholder="Ej. 80" oninput="calculate()">
        </div>

        <div class="input-block">
            <label>4. Costo del Producto (COGS) ($)</label>
            <input type="number" id="cost" value="30" placeholder="Ej. 30" oninput="calculate()">
            <p class="hint">Incluye costo de fábrica + envío + empaque.</p>
        </div>
    </div>

    <div class="viz-panel">
        
        <div class="projection-header">
            <div>
                <div class="m-label" style="color:var(--orange-neon)">Proyección de Rentabilidad</div>
                <div class="main-title">Tu Potencial de Escala</div>
            </div>
            <div style="text-align: right;">
                <div class="m-label">Margen Bruto Actual</div>
                <div style="font-size: 1.5rem; font-weight: 700;" id="gross-margin-display">0%</div>
            </div>
        </div>

        <div class="cards-grid">
            <div class="metric-card">
                <div class="m-label">Inversión Recomendada</div>
                <div class="m-val" id="rec-invest">$0</div>
                <div class="m-sub">Presupuesto Mensual</div>
            </div>
            <div class="metric-card" style="border-color: var(--orange-neon);">
                <div class="m-label">Utilidad Neta (Bolsillo)</div>
                <div class="m-val" style="color:var(--orange-neon)" id="rec-profit">$0</div>
                <div class="m-sub" id="rec-margin">0% Margen Final</div>
            </div>
            <div class="metric-card">
                <div class="m-label">Ventas Necesarias</div>
                <div class="m-val" id="rec-sales">0</div>
                <div class="m-sub">Transacciones/Mes</div>
            </div>
        </div>

        <div style="margin-top: 20px;">
            <div class="m-label">Fases de Madurez Publicitaria (Escenarios Exponenciales)</div>
        </div>

        <div class="phases-container">
            
            <div class="phase-col">
                <span class="p-badge pb-1">Fase 1: Validación</span>
                <div style="height: 40px; font-size: 0.9rem; color: #888;">Lanzamiento, testeo de audiencias, pixel nuevo.</div>
                <div class="p-roas" style="color: #ccc;" id="p1-roas">3.0x</div>
                <div class="p-profit" id="p1-profit">$0</div>
                <ul class="p-list">
                    <li><span>Inversión:</span> <span id="p1-inv">$0</span></li>
                    <li><span>Retorno Bruto:</span> <span id="p1-rev">$0</span></li>
                    <li><span>Costo Adq. (CPA):</span> <span id="p1-cpa">$0</span></li>
                </ul>
            </div>

            <div class="phase-col recommended">
                <span class="p-badge pb-2">Fase 2: Crecimiento</span>
                <div style="height: 40px; font-size: 0.9rem; color: #ccc;">Campañas optimizadas, creativos ganadores.</div>
                <div class="p-roas" style="color: var(--orange-neon);" id="p2-roas">5.0x</div>
                <div class="p-profit" style="color: #fff;" id="p2-profit">$0</div>
                <ul class="p-list">
                    <li><span>Inversión:</span> <span id="p2-inv">$0</span></li>
                    <li><span>Retorno Bruto:</span> <span id="p2-rev">$0</span></li>
                    <li><span>Costo Adq. (CPA):</span> <span id="p2-cpa">$0</span></li>
                </ul>
            </div>

            <div class="phase-col">
                <span class="p-badge pb-3">Fase 3: Autoridad</span>
                <div style="height: 40px; font-size: 0.9rem; color: #888;">Marca establecida, LTV alto, remarketing potente.</div>
                <div class="p-roas" style="color: #fff;" id="p3-roas">8.0x</div>
                <div class="p-profit" id="p3-profit">$0</div>
                <ul class="p-list">
                    <li><span>Inversión:</span> <span id="p3-inv">$0</span></li>
                    <li><span>Retorno Bruto:</span> <span id="p3-rev">$0</span></li>
                    <li><span>Costo Adq. (CPA):</span> <span id="p3-cpa">$0</span></li>
                </ul>
            </div>
            
            <div id="profit-warning" class="alert-box">
                ⚠️ <strong>Advertencia de Rentabilidad:</strong> Tu margen de producto es muy bajo. Para ganar dinero real necesitas estar obligatoriamente en la <strong>Fase 3</strong> (ROAS 8x+). Sugerencia: Sube tus precios o crea Packs (Bundles) para aumentar el Ticket Promedio.
            </div>

        </div>
    </div>
</div>

<script>
    // CONFIGURACIÓN DE NICHOS (ROAS POTENCIALES)
    // Definimos qué es "Normal" y "Excelente" para cada industria
    const nicheConfig = {
        fashion: { low: 3.0, mid: 5.0, high: 8.0 },     // Moda permite ROAS alto por volumen y recompra
        high_ticket: { low: 4.0, mid: 7.0, high: 12.0 }, // High ticket tiene márgenes gigantes
        infoproduct: { low: 2.5, mid: 4.5, high: 7.0 },  // Infoproductos suelen tener CPCs caros pero 100% margen
        real_estate: { low: 10.0, mid: 20.0, high: 40.0 }, // En Real Estate el ROAS se mide diferente (Comisión/Costo Lead)
        tech: { low: 3.0, mid: 4.5, high: 6.5 }        // Tech tiene márgenes más apretados
    };

    function calculate() {
        // 1. Obtener Inputs
        const niche = document.getElementById('niche').value;
        const revenueGoal = parseFloat(document.getElementById('revenueGoal').value) || 0;
        const ticket = parseFloat(document.getElementById('ticket').value) || 0;
        const cost = parseFloat(document.getElementById('cost').value) || 0;

        if (revenueGoal === 0 || ticket === 0) return;

        // 2. Calcular Márgenes Base
        const grossMargin = ticket - cost;
        const grossMarginPerc = (grossMargin / ticket) * 100;
        const breakEvenROAS = ticket / grossMargin;

        document.getElementById('gross-margin-display').innerText = grossMarginPerc.toFixed(0) + "%";

        // 3. Definir Escenarios de ROAS basados en el Nicho
        let roasTiers = nicheConfig[niche];

        // Ajuste inteligente: Si el margen es muy bajo, el ROAS necesario sube automáticamente
        // para no mostrar escenarios donde se pierde dinero.
        if (breakEvenROAS > roasTiers.low) {
            roasTiers.low = breakEvenROAS + 0.5; // Mínimo viable
            roasTiers.mid = breakEvenROAS * 1.5; // Saludable
            roasTiers.high = breakEvenROAS * 2.5; // Excelente
        }

        // 4. Calcular Fases (Exponential Growth)
        const phases = [
            { id: 'p1', roas: roasTiers.low },
            { id: 'p2', roas: roasTiers.mid },
            { id: 'p3', roas: roasTiers.high }
        ];

        phases.forEach(p => {
            // Inversión necesaria para lograr el objetivo con ese ROAS
            const investment = revenueGoal / p.roas;
            
            // Costos Totales = Inversión + Costo de Producto
            // Unidades vendidas = Revenue / Ticket
            const units = Math.ceil(revenueGoal / ticket);
            const totalCOGS = units * cost;
            const totalCost = investment + totalCOGS;
            
            const netProfit = revenueGoal - totalCost;
            
            // CPA (Costo por Adquisición)
            const cpa = investment / units;

            // Renderizar en la tarjeta correspondiente
            document.getElementById(`${p.id}-roas`).innerText = p.roas.toFixed(1) + "x";
            document.getElementById(`${p.id}-profit`).innerText = fmtMoney(netProfit);
            document.getElementById(`${p.id}-inv`).innerText = fmtMoney(investment);
            document.getElementById(`${p.id}-rev`).innerText = fmtMoney(revenueGoal);
            document.getElementById(`${p.id}-cpa`).innerText = fmtMoney(cpa);

            // Color Coding Profit
            const profitEl = document.getElementById(`${p.id}-profit`);
            if (netProfit <= 0) profitEl.style.color = "#FF2D55"; // Rojo
            else profitEl.style.color = "#fff"; // Blanco
            
            // Si es la fase 2 (Growth/Recommended), actualizar Hero Metrics
            if (p.id === 'p2') {
                document.getElementById('rec-invest').innerText = fmtMoney(investment);
                document.getElementById('rec-profit').innerText = fmtMoney(netProfit);
                document.getElementById('rec-sales').innerText = units;
                
                const netMargin = (netProfit / revenueGoal) * 100;
                document.getElementById('rec-margin').innerText = netMargin.toFixed(1) + "% Margen Neto";

                // Advertencia si la utilidad es muy baja incluso en fase media
                const warningBox = document.getElementById('profit-warning');
                if (netMargin < 15) {
                    warningBox.style.display = "block";
                } else {
                    warningBox.style.display = "none";
                }
            }
        });
    }

    function fmtMoney(num) {
        return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 }).format(num);
    }

    // Inicializar
    calculate();
</script>

</body>
</html>
